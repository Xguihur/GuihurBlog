# 阿里云服务器购买域名、备案、SSL申请经历

## 背景

很早就想自己注册域名了，但总是想着备案很麻烦，要半个月审核时间，就一直没弄。小程序的上线也是受困于 https 的限制止步了，目前还是很想接触小程序这一块，熟悉起来！

目前周末有这个时间，又因为 github 网站不接受 非 https 的图片请求，这就导致我自己写的图片上传服务用不上了，那怎么行！于是打算自己弄一个域名，将 博客迁移到我的云服务器中，同时申请一下 https，后续弄小程序或者是自己的毕设都能用的上。

## 具体过程
### 域名购买
在阿里云服务器中购买域名非常方便，并且只要是不常用的域名，就比较实惠，综合首付+续费都比较便宜的价格，我选择了 guihurge.top 的域名。
按照官网的流程走，选择域名，填写信息（创建信息模板），审核通过后付款，这样域名就买到了！
![image.png](http://8.134.197.161:3000/api/images/blog/image-1711219293444.png)
买到域名后就可以在域名列表中查看自己的域名了，同时还可以点击解析，设置自己的二级域名进行解析，我这里设置的是 www.guihurge.top 域名作为我的服务器 ip 对应的域名。之后也能设置不同的二级域名解析为其他的服务器 ip 。

**注意**：信息模板验证通过后才能购买域名，但买到域名并且解析好域名后并不能直接使用，还需要去进行实名认证才可以。这个实名认证不是阿里云进行认证，而是备案局那边走认证，所以大概要等个 1h 左右，通过后会发短信通知的，这段时间可以自己去了解一下其他的资料，看看视频或者看阿里云文档都可以。

通过实名认证后的域名，就可以本地进行测试了，随便拿一个 terminal 去 ping 自己的域名就可以看到结果。例如：`ping www.guihurge.top`  就能看到返回值。只要正常看的到TTL就是成功了，可以对比 *ping www.baidu.com*   ，和它一样就行了。

此时的域名算是购买完成，并且成功告一段落了。但没有完成域名备案，所以即使用 域名 替换 --已经部署好并且可以使用 ip + 端口 访问-- 的服务器也是没法正常访问的，它会跳转到未备案提示页面。（但我第一次成功访问了，后面应该是被查到了就强制重定向了）
![image.png](http://8.134.197.161:3000/api/images/blog/image-1711219319285.png)
域名购买是参考了一个视频的教程，感谢大佬帮我照亮前方的路，让我能够知道购买域名后大致还要做些什么，怎么样才算成功！再次感谢大佬！
 [通过阿里云服务器实现访问自己的网站，域名绑定教程](https://www.bilibili.com/video/BV1y7411d7qb/?share_source=copy_web&vd_source=8e661d49218ba9cc479f684f19abce37) 
虽然是 2020 年的视频，但确实还是有用的！

### 域名备案
备案相关的资料也看了很多了，在阿里云的文档中也有很多资料，但这次我不想止步于看了，于是开始了备案的操作！感谢阿里云的一系列教程简单易懂，非常靠谱！整个购买流程，既给我科普了为什么要备案，又有一个很好的教程帮助我完成备案！
![image.png](http://8.134.197.161:3000/api/images/blog/image-1711219357670.png)
按照以上列出来的五个步骤进行填写信息就好了，阿里云会帮助我们提交到工信部进行备案申请。

**注意** ：因为我的域名刚购买，并且刚刚实名认证成功，所以填写完信息后提交时，当地备案局没有查询到我的实名认证信息。所以我只能保存草稿，等2-3天后，查询得到实名信息了再进行后续的流程进行备案。阿里云说备案信息提交后，30天内能审核通过，我期待一下哈哈！

--2024年3月20日继续记录--
19号晚上在等辉哥开会时，去看了一下阿里云的备案，发现可以备案了！于是就开始推进流程。其中涉及到人脸识别、还要求在白色背景下识别。然后还要录像说一承诺的话上传。
最后一个是比较麻烦的，需要打印它的备案模板（其实就是一个图片），打印下来后，签名，按手印。我本来想找公司弄的，但还是太麻烦了没人教，就下班去门口打印店，但它打烊了。就回到了万达，找了一个打印店打印，还借了印泥完成了一系列操作！买了点吃的当晚餐，回到家里就开电脑打开阿里云，手机扫码，传图片！搞定！目前正在备案审核过程中，15个工作日左右就有结果了嘿嘿！
阿里云客服推销产品的时候，我抓住机会问了她相关的问题，了解到备案成功后拿到备案号，还要在30日内悬挂出来，不管有没有开发完成。而且还要登录公安啥的网站，提交公安备案申请。
### SSL 证书申请以及使用
在阿里云服务器中每年可以免费申请三个月的证书使用，而且使用证书也没自己想的那么复杂，不需要精通 nginx 技术，使用宝塔面板帮忙就好了！

也感谢这位 UP 提供的视频帮助。让我知道了阿里云可以免费申请3个月的证书，也让我看到了完整的申请证书流程。我再实际操作的时候弯路就少走了很多，而且也比较有信心去操作，不至于一头雾水那样！感谢大佬的帮助，我才能在一天之内弄清楚：域名、备案、SSL证书！
 [白嫖阿里云免费版HTTPS数字安全证书，超详细教程来了！](https://www.bilibili.com/video/BV1ET4y1t7vK/?share_source=copy_web&vd_source=8e661d49218ba9cc479f684f19abce37) 

:::info
果然，少走弯路并不全是坏处，至少给我省了很多时间，同时也快速建立了对这方面知识的基础！按照正确的路径去实践，就是会事半功倍！虽然并不是说经受磨砺不好，但走几步就卡顿一下，很容易把一个简单的东西想的过于复杂，导致一直无法前进，或者是前进一点点就费了很大劲，导致自己以为前进了很多！
:::
:::warning
这就是有人带的好处吧，虽然我不太喜欢直接问别人，让别人手把手教。但自己通过找资料也实现了这一目的，感谢大佬们提供的资料。之后自己在线下或许也会更加主动地去寻找方法，而非自己硬啃了！虽然这和辉哥的理念又冲突了，但他说的也在理，经历过磨难确实是会记忆深刻。可能这两者之间的平衡需要自己掌握，不能一昧的寻求手把手带，也不能一昧的死磕犹如蜗牛一般的速度前进！
:::

在阿里云服务器中，搜索 SSL ，即可选择购买服务，买免费的 3个月。
接着回到SSL证书列表中，选择免费证书，点击 `创建证书` ![image.png](http://8.134.197.161:3000/api/images/blog/image-1711219390305.png)

---

接着点击申请 3个月免费证书，填好信息后，就可以查看当前的状态，会显示 CA 机构正在审核中，并且下面有几个需要填写的信息，我截一个视频的来展示，实际上就是新增一项域名解析，填写阿里云提供的对应数据即可。填写完后点击阿里云的验证，就能看到验证通过的提示。接下来等待 1-2h 就会收到短信通知 SSL 证书申请成功了！
![image.png](http://8.134.197.161:3000/api/images/blog/image-1711219423101.png)
[图片来源于视频，如有侵权请联系我进行处理](https://www.bilibili.com/video/BV1o54y1e7rR/?spm_id_from=333.337.search-card.all.click&vd_source=6e82c2bc475d3cb127e47892e43f7b86) 

收到通过申请的短信后，就可以到 SSL 列表页面查看当前的证书，状态为 **已签发** 。上-上图所示，右侧有一个下载按钮，点击可以选择不同类型的证书，我选择下载 Nginx 版本的证书，里面有 key 和 pem 文件。

接着就是部署 SSL 证书了！这一步用代码会比较复杂，涉及到修改  Nginx 配置文件。我通过宝塔面板进行部署：

1. 首先登录宝塔面板，并且部署好自己的静态页面
2. 在《网站》菜单栏中，找到对应的网站进行设置，配置对应的 SSL 证书
3. 这时候需要填入两个文件，就是刚刚下载的证书，直接粘贴进去即可！
4. 点击保存，这个网站就可以使用 Https 服务了！！！
5. 而且宝塔面板还能开启强制转换 https 的服务，实测确实是强制转换了，太牛了宝塔，运维神器啊！

![image.png](http://8.134.197.161:3000/api/images/blog/image-1711219451459.png)

到这里，购买 SSL 证书，以及部署就完成了，也不算很难。购买成功后，使用 宝塔 部署，就完成了！非常酷！
## 告一段落
现在：域名买到了，SSL 证书部署好了，博客也迁移到服务器上了！万事俱备，只欠东风！等域名备案完成后，就可以开始自己的开发之路了！爽歪歪啊！！！

并且 SSL 证书弄好了，接下来小程序开发也可以玩一玩了！芜湖～虽然还会有很多阻碍导致我无法部署 小程序，但能够用域名访问网站也很爽了！

冲冲冲！接下来就差域名备案！！！
