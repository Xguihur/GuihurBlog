<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ğŸ’Œçºµè§‚å…¨å±€ -- ä¿¯è§†ä»£ç  | Guihur Blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="æˆ‘çš„æ—¥å¸¸ä¸ªäººåšå®¢">
    
    <link rel="preload" href="/GuihurBlog/assets/css/0.styles.82efe5de.css" as="style"><link rel="preload" href="/GuihurBlog/assets/js/app.8bb8757a.js" as="script"><link rel="preload" href="/GuihurBlog/assets/js/7.f1c26474.js" as="script"><link rel="preload" href="/GuihurBlog/assets/js/2.70e4b6cf.js" as="script"><link rel="preload" href="/GuihurBlog/assets/js/1.e850f610.js" as="script"><link rel="preload" href="/GuihurBlog/assets/js/47.0951090b.js" as="script"><link rel="prefetch" href="/GuihurBlog/assets/js/10.7f3cc58c.js"><link rel="prefetch" href="/GuihurBlog/assets/js/11.998bbd30.js"><link rel="prefetch" href="/GuihurBlog/assets/js/14.2f88753a.js"><link rel="prefetch" href="/GuihurBlog/assets/js/15.97d18493.js"><link rel="prefetch" href="/GuihurBlog/assets/js/16.74c211db.js"><link rel="prefetch" href="/GuihurBlog/assets/js/17.87fbf99b.js"><link rel="prefetch" href="/GuihurBlog/assets/js/18.1ba5666b.js"><link rel="prefetch" href="/GuihurBlog/assets/js/19.c9672eab.js"><link rel="prefetch" href="/GuihurBlog/assets/js/20.cef40ce1.js"><link rel="prefetch" href="/GuihurBlog/assets/js/21.ff4bba77.js"><link rel="prefetch" href="/GuihurBlog/assets/js/22.255828eb.js"><link rel="prefetch" href="/GuihurBlog/assets/js/23.a8f2e445.js"><link rel="prefetch" href="/GuihurBlog/assets/js/24.8a10a6a7.js"><link rel="prefetch" href="/GuihurBlog/assets/js/25.68f13823.js"><link rel="prefetch" href="/GuihurBlog/assets/js/26.0becbeee.js"><link rel="prefetch" href="/GuihurBlog/assets/js/27.4e3209a7.js"><link rel="prefetch" href="/GuihurBlog/assets/js/28.07c425ee.js"><link rel="prefetch" href="/GuihurBlog/assets/js/29.a0d96603.js"><link rel="prefetch" href="/GuihurBlog/assets/js/3.8ef4d04b.js"><link rel="prefetch" href="/GuihurBlog/assets/js/30.b3e830ef.js"><link rel="prefetch" href="/GuihurBlog/assets/js/31.87b03ce3.js"><link rel="prefetch" href="/GuihurBlog/assets/js/32.b7e03d21.js"><link rel="prefetch" href="/GuihurBlog/assets/js/33.70ff7812.js"><link rel="prefetch" href="/GuihurBlog/assets/js/34.6c030a04.js"><link rel="prefetch" href="/GuihurBlog/assets/js/35.4664bc2e.js"><link rel="prefetch" href="/GuihurBlog/assets/js/36.b79cd8bd.js"><link rel="prefetch" href="/GuihurBlog/assets/js/37.96e4adfb.js"><link rel="prefetch" href="/GuihurBlog/assets/js/38.af5dabea.js"><link rel="prefetch" href="/GuihurBlog/assets/js/39.ae58f3c7.js"><link rel="prefetch" href="/GuihurBlog/assets/js/4.78de5fa6.js"><link rel="prefetch" href="/GuihurBlog/assets/js/40.91a13910.js"><link rel="prefetch" href="/GuihurBlog/assets/js/41.c0049a39.js"><link rel="prefetch" href="/GuihurBlog/assets/js/42.c480a2fd.js"><link rel="prefetch" href="/GuihurBlog/assets/js/43.4c67b160.js"><link rel="prefetch" href="/GuihurBlog/assets/js/44.815cee21.js"><link rel="prefetch" href="/GuihurBlog/assets/js/45.93e58a4e.js"><link rel="prefetch" href="/GuihurBlog/assets/js/46.2e24abda.js"><link rel="prefetch" href="/GuihurBlog/assets/js/48.00b33a16.js"><link rel="prefetch" href="/GuihurBlog/assets/js/49.39b8edca.js"><link rel="prefetch" href="/GuihurBlog/assets/js/5.f2fa280f.js"><link rel="prefetch" href="/GuihurBlog/assets/js/50.16214f22.js"><link rel="prefetch" href="/GuihurBlog/assets/js/51.38c6911d.js"><link rel="prefetch" href="/GuihurBlog/assets/js/6.734159d4.js"><link rel="prefetch" href="/GuihurBlog/assets/js/8.9514a870.js"><link rel="prefetch" href="/GuihurBlog/assets/js/9.dc8337af.js"><link rel="prefetch" href="/GuihurBlog/assets/js/vendors~docsearch.86fb114e.js">
    <link rel="stylesheet" href="/GuihurBlog/assets/css/0.styles.82efe5de.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Guihur Blog</h3> <p class="description" data-v-59e6cb88>æˆ‘çš„æ—¥å¸¸ä¸ªäººåšå®¢</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
        Â Â 
        <!---->
        2024
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/GuihurBlog/" class="home-link router-link-active"><img src="/GuihurBlog/logo1.png" alt="Guihur Blog" class="logo"> <span class="site-name">Guihur Blog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/GuihurBlog/" class="nav-link"><i class="undefined"></i>
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      æ¡‚èŠ±çš„å…³è”ç½‘ç«™
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Xguihur" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.yuque.com/luffy-j7ldi" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  è¯­é›€
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://47.120.44.145:3000/#/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  ç®—æ³•åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/Xguihur/GuihurBlog.git" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-æŸ¥çœ‹æºç "></i>
    æŸ¥çœ‹æºç 
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>12</h3> <h6 data-v-1fad0c41>æ–‡ç« </h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>0</h3> <h6 data-v-1fad0c41>æ ‡ç­¾</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/GuihurBlog/" class="nav-link"><i class="undefined"></i>
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      æ¡‚èŠ±çš„å…³è”ç½‘ç«™
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Xguihur" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.yuque.com/luffy-j7ldi" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  è¯­é›€
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://47.120.44.145:3000/#/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  ç®—æ³•åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/Xguihur/GuihurBlog.git" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-æŸ¥çœ‹æºç "></i>
    æŸ¥çœ‹æºç 
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/GuihurBlog/" class="sidebar-heading clickable router-link-active"><span>æ¬¢è¿å­¦ä¹ </span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/GuihurBlog/" aria-current="page" class="sidebar-link">å­¦å‰å¿…è¯»</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/GuihurBlog/technology_sharing/First" class="sidebar-heading clickable open"><span>æŠ€æœ¯åˆ†äº«</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/GuihurBlog/hello-world/" class="sidebar-link">One</a></li><li><a href="/GuihurBlog/technology_sharing/blogè¸©å‘æ—¥å¿—.html" class="sidebar-link">Blogè¸©å‘æ—¥å¿—</a></li><li><a href="/GuihurBlog/technology_sharing/äº†è§£Flutter.html" class="sidebar-link">äº†è§£Flutter</a></li><li><a href="/GuihurBlog/technology_sharing/TOTPåŸç†è§£æ.html" class="sidebar-link">TOTPåŸç†è§£æ</a></li><li><a href="/GuihurBlog/technology_sharing/Vueå“åº”å¼åŸç†è§£æ.html" class="active sidebar-link">Vueå“åº”å¼åŸç†è§£æ</a></li><li><a href="/GuihurBlog/technology_sharing/ç›²æ‰“é€Ÿæˆ.html" class="sidebar-link">ç›²æ‰“é€Ÿæˆ</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/GuihurBlog/life_detail/template" class="sidebar-heading clickable"><span>ç”Ÿæ´»ç‚¹æ»´</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/GuihurBlog/life_detail/template.html" class="sidebar-link">life_one</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/GuihurBlog/play/template" class="sidebar-heading clickable"><span>è‡ªå¨±è‡ªä¹</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/GuihurBlog/play/template.html" class="sidebar-link">play_one</a></li><li><a href="/GuihurBlog/play/travel_sz.html" class="sidebar-link">æ·±åœ³ä¹‹æ—…</a></li><li><a href="/GuihurBlog/play/å¤ªåˆ€ä¿®ç‚¼.html" class="sidebar-link">å¤ªåˆ€ä¿®ç‚¼</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88></h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
        Â Â 
        <!---->
        2024
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">ğŸ’Œçºµè§‚å…¨å±€ -- ä¿¯è§†ä»£ç </h1> <div data-v-8a445198><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="ğŸ’Œçºµè§‚å…¨å±€-ä¿¯è§†ä»£ç "><a href="#ğŸ’Œçºµè§‚å…¨å±€-ä¿¯è§†ä»£ç " class="header-anchor">#</a> ğŸ’Œçºµè§‚å…¨å±€ -- ä¿¯è§†ä»£ç </h1> <p><a href="https://www.yuque.com/luffy-j7ldi/yux7yt/nr33g2iuald76dmi" target="_blank" rel="noopener noreferrer">è¯­é›€ä¸­å·²å…¬å¼€å½“å‰æ–‡ç«  -- æˆ³è¿™é‡ŒğŸ‘ˆ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol><li>åˆ›å»º Vue ç±»</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$data <span class="token operator">=</span> options<span class="token punctuation">.</span>data
    <span class="token function">Observe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span>

    <span class="token comment">// å±æ€§ä»£ç†</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// console.log('è§¦å‘ this ä¸Šå±æ€§çš„ get å±æ€§')</span>
          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> newValue
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// è°ƒç”¨æ¨¡æ¿ç¼–è¯‘çš„å‡½æ•°</span>
    <span class="token function">compiler</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>el<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>åˆ›å»º æ•°æ®åŠ«æŒæ–¹æ³•</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Observe</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>obj <span class="token operator">||</span> <span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
  <span class="token keyword">const</span> dep <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dep</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> value <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
    <span class="token function">Observe</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¦‚æœå®ä¾‹å­˜åœ¨çš„è¯å°±å°†å®ä¾‹æ·»åŠ åˆ°æ•°ç»„ä¸­</span>
        Dep<span class="token punctuation">.</span>target <span class="token operator">&amp;&amp;</span> dep<span class="token punctuation">.</span><span class="token function">addSub</span><span class="token punctuation">(</span>Dep<span class="token punctuation">.</span>target<span class="token punctuation">)</span>
        <span class="token comment">// console.log(dep)</span>
        <span class="token keyword">return</span> value
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        value <span class="token operator">=</span> newValue
        <span class="token function">Observe</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        dep<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>åˆ›å»º compiler æ–¹æ³•</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">compiler</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> vm</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// è·å– el å¯¹åº”çš„ dom å…ƒç´ </span>
  vm<span class="token punctuation">.</span>$el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>

  <span class="token comment">// åˆ›å»ºæ–‡æ¡£ç¢ç‰‡</span>
  <span class="token keyword">const</span> fragment <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$el<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fragment<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$el<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// è¿›è¡Œæ¨¡æ¿ç¼–è¯‘ ç”¨ä¸€ä¸ªå‡½æ•°å°è£…èµ·æ¥ï¼ŒåŒ…å«æ¨¡æ¿ç¼–è¯‘çš„å…¨è¿‡ç¨‹ï¼Œå°±æš‚æ—¶ä¸æŠ½ç¦»å‡ºå»äº†ï¼Œçœä¸€äº›äº‹</span>
  <span class="token function">replace</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span>

  vm<span class="token punctuation">.</span>$el<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span>

  <span class="token comment">// è´Ÿè´£å¯¹ dom æ¨¡æ¿è¿›è¡Œç¼–è¯‘  æ ¸å¿ƒä¸­çš„æ ¸å¿ƒå‡½æ•°</span>
  <span class="token keyword">function</span> <span class="token function">replace</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> regMustache <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\{\{\s*(\S+)\s*\}\}</span><span class="token regex-delimiter">/</span></span> <span class="token comment">//åŒ¹é…æ’å€¼è¡¨è¾¾å¼çš„æ­£åˆ™è¡¨è¾¾å¼</span>
    <span class="token comment">// åˆ¤æ–­æ˜¯å¦ä¸º æ–‡æœ¬èŠ‚ç‚¹</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> text <span class="token operator">=</span> node<span class="token punctuation">.</span>textContent
      <span class="token keyword">const</span> regResult <span class="token operator">=</span> regMustache<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>regResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> value <span class="token operator">=</span> regResult<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> vm<span class="token punctuation">)</span>
        node<span class="token punctuation">.</span>textContent <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regMustache<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
        <span class="token keyword">new</span> <span class="token class-name">Watcher</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> regResult<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token parameter">newValue</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// node.textContent = node.textContent.replace(regResult[0], value)</span>
          node<span class="token punctuation">.</span>textContent <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regMustache<span class="token punctuation">,</span> newValue<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// åˆ¤æ–­æ˜¯å¦ä¸º input èŠ‚ç‚¹</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'INPUT'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// åˆ¤æ–­æ˜¯å¦æœ‰ v-model å±æ€§</span>
      <span class="token keyword">const</span> attrs <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>attributes<span class="token punctuation">)</span> <span class="token comment">//ä¼ªæ•°ç»„è½¬æ•°ç»„</span>
      <span class="token keyword">const</span> model <span class="token operator">=</span> attrs<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'v-model'</span><span class="token punctuation">)</span> <span class="token comment">//å°†å«æœ‰ v-model çš„èŠ‚ç‚¹çš„modelå€¼é€‰å‡ºæ¥ v-model=&quot;name&quot;,å­—ç¬¦ä¸²æ ¼å¼,ä¸ç¬¦åˆçš„ä¸ºnull</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> valueKey <span class="token operator">=</span> model<span class="token punctuation">.</span>value
        <span class="token keyword">const</span> value <span class="token operator">=</span> valueKey<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> vm<span class="token punctuation">)</span>
        <span class="token comment">// console.log(value)</span>
        node<span class="token punctuation">.</span>value <span class="token operator">=</span> value <span class="token comment">//ç°åœ¨åªæ˜¯é¦–æ¬¡ç¼–è¯‘çš„æ—¶å€™èƒ½åŒæ­¥</span>
        <span class="token comment">// ä½¿ç”¨å‘å¸ƒè®¢é˜…æ¨¡å¼å®ç°å•å‘ç»‘å®š</span>
        <span class="token keyword">new</span> <span class="token class-name">Watcher</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> valueKey<span class="token punctuation">,</span> <span class="token parameter">newValue</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          node<span class="token punctuation">.</span>value <span class="token operator">=</span> newValue
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        node<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// å–å€¼  æŒ‰ . åˆ†å‰²ä¹‹å å†ç”¨ sliceå–åˆ°å€’æ•°ç¬¬äºŒä¸ª</span>
          <span class="token keyword">const</span> keyArr <span class="token operator">=</span> valueKey<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span>
          <span class="token keyword">const</span> obj <span class="token operator">=</span> keyArr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> keyArr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">newobj<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> newobj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> vm<span class="token punctuation">)</span> <span class="token comment">//objæ˜¯åˆ° å€’æ•°ç¬¬äºŒä¸ªå±æ€§</span>
          <span class="token comment">// èµ‹å€¼ æ›¿æ¢</span>
          <span class="token comment">// obj[keyArr.length - 1] = e.target.value</span>
          <span class="token keyword">const</span> leafKey <span class="token operator">=</span> keyArr<span class="token punctuation">[</span>keyArr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">//å–åˆ°æœ€åä¸€ä¸ªå±æ€§</span>
          obj<span class="token punctuation">[</span>leafKey<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token comment">//å€’æ•°ç¬¬äºŒä¸ªå¼•ç”¨å€’æ•°ç¬¬ä¸€ä¸ª å±æ€§,æœ€ç»ˆå¾—åˆ°ç›®æ ‡å€¼çš„ä½ç½®,æ›¿æ¢å€¼å°±å¥½</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    node<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">replace</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>ç»“åˆå‘å¸ƒè®¢é˜…è€…æ¨¡å¼</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Dep</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">//å¯ä»¥ä¼˜åŒ–ä¸º å•ä¾‹æ¨¡å¼</span>
  <span class="token punctuation">}</span>
  <span class="token function">addSub</span><span class="token punctuation">(</span><span class="token parameter">watcher</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>watcher<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Watcher</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">vm<span class="token punctuation">,</span> key<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>vm <span class="token operator">=</span> vm
    <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key
    <span class="token keyword">this</span><span class="token punctuation">.</span>cb <span class="token operator">=</span> cb

    Dep<span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token keyword">this</span>
    key<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> vm<span class="token punctuation">)</span>
    Dep<span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span>
  <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>key<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vm<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>key<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cb</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h1 id="ğŸ’è§†é¢‘é¡ºåºè§£ææ¨¡å—"><a href="#ğŸ’è§†é¢‘é¡ºåºè§£ææ¨¡å—" class="header-anchor">#</a> ğŸ’è§†é¢‘é¡ºåºè§£ææ¨¡å—</h1> <h2 id="ğŸ™‚åˆ›å»º-vue-ç±»"><a href="#ğŸ™‚åˆ›å»º-vue-ç±»" class="header-anchor">#</a> ğŸ™‚åˆ›å»º Vue ç±»</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$data <span class="token operator">=</span> options<span class="token punctuation">.</span>data
    <span class="token function">Observe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span>

    <span class="token comment">// å±æ€§ä»£ç†</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// console.log('è§¦å‘ this ä¸Šå±æ€§çš„ get å±æ€§')</span>
          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> newValue
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// è°ƒç”¨æ¨¡æ¿ç¼–è¯‘çš„å‡½æ•°</span>
    <span class="token function">compiler</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>el<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <ol><li>é¦–å…ˆ<strong>åˆ›å»º Vue ç±»</strong>ï¼Œæ„é€ å‡½æ•°ä¸­ä¼ å…¥ä¸€ä¸ª<strong>é…ç½®å¯¹è±¡</strong>å‚æ•°ï¼Œåœ¨å†…éƒ¨å°† data èµ‹å€¼ç»™ $data</li> <li>è°ƒç”¨ä¸€ä¸‹ <strong>Observe å‡½æ•°</strong>ï¼Œå°† data å¯¹è±¡ä¼ å…¥ï¼Œå†…éƒ¨çš„ä½œç”¨æ˜¯å¯¹ data ä¸­æ‰€æœ‰çš„æ•°æ®è¿›è¡ŒåŠ«æŒ
<ol><li>åé¢ç»“åˆå‘å¸ƒè®¢é˜…æ¨¡å¼è¿˜ åˆ›å»ºäº†ä¸€ä¸ª Dep å®ä¾‹ï¼Œç”¨äºåœ¨ è§¦å‘ get çš„æ—¶å€™åˆ¤æ–­ Dep ç±»ä¸­æ˜¯å¦ç»‘å®šäº† watcher å®ä¾‹ï¼Œæœ‰çš„è¯å°± æ‰§è¡Œ addSub æ–¹æ³•ï¼Œä¹Ÿç”¨äºåœ¨ set ä¸­å€¼è¢«æ›´æ–°æ—¶ è°ƒç”¨ notify å»é€šçŸ¥æ‰€æœ‰çš„è®¢é˜…è€…</li></ol></li> <li>é€šè¿‡<strong>å±æ€§ä»£ç†</strong>çš„æ–¹å¼ï¼Œä¸º vm å®ä¾‹ä»£ç†ä¸Š data ä¸­çš„æ•°æ®ï¼Œæ˜¯ä¸€ä¸ªä¾¿æ·æ–¹å¼ï¼Œé€šè¿‡ this.name æ–¹å¼ è°ƒç”¨åŸæœ¬éœ€è¦ this.$data.name è°ƒç”¨ çš„å±æ€§</li> <li>æœ€åé€šè¿‡ æ‰§è¡Œ <strong>compiler å‡½æ•°</strong>å°†ç”¨æˆ·ç¼–å†™çš„æ¨¡æ¿è¿›è¡Œ æ¨¡æ¿è¯­è¨€ æ›¿æ¢
<ol><li>ä¸»è¦æ˜¯åŒ¹é… mustache è¯­æ³• ä»¥åŠ å±æ€§ä¸­åŠ¨æ€ç»‘å®šçš„å±æ€§å€¼ï¼Œå°†è¿™äº›å ä½ç¬¦æ›¿æ¢ä¸º data ä¸­çš„æ•°æ®</li></ol></li></ol> <p><strong>æ€»ç»“ï¼š</strong></p> <ul><li>**ä¸»è¦å°±æ˜¯åœ¨ new Vue çš„å®ä¾‹çš„åŒæ—¶æ‰§è¡Œä»¥ä¸Šäº”ä¸ªæ­¥éª¤ï¼Œä¸º Vue å®ä¾‹åšåˆå§‹åŒ–ï¼Œé…ç½®å‚æ•°dataçš„æ•°æ®åŠ«æŒä»¥åŠæ¨¡æ¿çš„ç¢ç‰‡åŒ–æ–‡æ¡£ä¼˜åŒ–å¤„ç† **</li></ul> <h2 id="ğŸ˜„åˆ›å»º-æ•°æ®åŠ«æŒ-çš„æ–¹æ³•"><a href="#ğŸ˜„åˆ›å»º-æ•°æ®åŠ«æŒ-çš„æ–¹æ³•" class="header-anchor">#</a> ğŸ˜„åˆ›å»º æ•°æ®åŠ«æŒ çš„æ–¹æ³•</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Observe</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>obj <span class="token operator">||</span> <span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
  <span class="token keyword">const</span> dep <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dep</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> value <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
    <span class="token function">Observe</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// console.log('æ‰§è¡Œäº† get')</span>
        <span class="token comment">// å¦‚æœå®ä¾‹å­˜åœ¨çš„è¯å°±å°†å®ä¾‹æ·»åŠ åˆ°æ•°ç»„ä¸­</span>
        Dep<span class="token punctuation">.</span>target <span class="token operator">&amp;&amp;</span> dep<span class="token punctuation">.</span><span class="token function">addSub</span><span class="token punctuation">(</span>Dep<span class="token punctuation">.</span>target<span class="token punctuation">)</span>
        <span class="token comment">// console.log(dep)</span>
        <span class="token keyword">return</span> value
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// console.log('æ‰§è¡Œäº† set')</span>
        <span class="token comment">// console.log(newValue)</span>
        value <span class="token operator">=</span> newValue
        <span class="token function">Observe</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        dep<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <ol><li>é¦–å…ˆ<strong>åˆ¤æ–­</strong>ä¼ å…¥çš„å‚æ•°<strong>æ˜¯å¦ä¸ºå¯¹è±¡ç±»å‹</strong>ï¼Œå¦‚æœä¸ä¸ºå¯¹è±¡ç±»å‹é‚£å°±ç›´æ¥ return
<ol><li>å› ä¸ºç¬¬ä¸€æ¬¡ä¼ å…¥çš„æ˜¯ data å¯¹è±¡ï¼Œä¸€å®šæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥è¿™ä¸ªé™åˆ¶åªæ˜¯ä½œä¸ºä¸‹é¢ **é€’å½’å¤„ç† **æ—¶çš„é€€å‡ºæ¡ä»¶ï¼Œå¹¶ä¸å½±å“æ­£å¸¸æ‰§è¡Œ</li></ol></li> <li>ç¬¬ä¸€æ¬¡ä¸€å®šæ˜¯å¯¹è±¡ï¼Œäºæ˜¯è¿›å…¥åˆ°ä¸‹é¢çš„ä»£ç ï¼Œå¯¹<strong>è¿™ä¸ªå¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§</strong>è¿›è¡Œ é€’å½’ åŠ«æŒï¼Œä¸»è¦æ˜¯åœ¨ get å’Œ set ä¸­è¦å¤„ç† <strong>å‘å¸ƒè®¢é˜…</strong> çš„ä»£ç ï¼Œæ‰€ä»¥æ‰éœ€è¦åŠ«æŒ
<ol><li>å› ä¸º å±æ€§çš„ get å’Œ set æœ‰å½“æ•°æ®è¢« å– æˆ–è€… èµ‹å€¼ æ—¶å°±æ‰§è¡Œå‡½æ•°çš„ç‰¹æ€§ï¼Œéå¸¸å¥‘åˆ å‘å¸ƒè®¢é˜… ä¸­çš„å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ æ›´æ–°æ¨¡æ¿ ä¸­æ•°æ®çš„ä¿®æ”¹ï¼Œäºæ˜¯è¢«é€‰æ‹©ä½¿ç”¨ï¼ï¼ˆvue3 ä¸­çš„ proxy ä¹Ÿåªæ˜¯æ›¿æ¢äº† è¿™ä¸€åŠŸèƒ½è€Œå·²ï¼Œç›®çš„æ˜¯æ›´å¤šçš„æ“ä½œæ€§ä»¥åŠè®©é€»è¾‘æ›´åŠ çš„åˆç†ï¼‰</li> <li>get å’Œ set çš„åŠ«æŒä¸­æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„ç‚¹å°±æ˜¯<strong>é˜²æ­¢ å¾ªç¯å¼•ç”¨</strong>ï¼
<ol><li>get/set å¦‚æœåœ¨å†…éƒ¨é‡æ–° å¼•ç”¨/èµ‹å€¼ï¼Œé‚£ä¹ˆå°±ç›¸å½“äºä¸€ç›´è§¦å‘ get/set</li> <li>è§£å†³è¿™ä¸€é—®é¢˜çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <strong>é—­åŒ…</strong>ï¼Œé€šè¿‡åœ¨ åŠ«æŒå‡½æ•° è°ƒç”¨ä¹‹å‰ï¼Œç”¨ä¸€ä¸ªå˜é‡å­˜ç€é‚£ä¸ªå€¼ï¼Œä¹‹åæ›´æ–°ä¸è·å–éƒ½é€šè¿‡è¿™ä¸ªå€¼å³å¯</li></ol></li> <li>set ä¸­ ä¸ºäº†ä¿è¯ ä¿®æ”¹åçš„ å€¼ä¹Ÿèƒ½å¤Ÿè¢«åŠ«æŒåˆ°ï¼Œäºæ˜¯åœ¨ä¿®æ”¹åä¹Ÿè¦å›è°ƒä¸€ä¸‹ Observe æ–¹æ³•ï¼Œå°†æ–°çš„å€¼é€šè¿‡è¿™ä¸ªå‡½æ•°æ•°æ®åŠ«æŒ</li></ol></li></ol> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/20359134/1679645866551-1868aaf3-91a1-479c-9a9b-b002986b79ac.png#averageHue=%23242a32&amp;clientId=uc69149a7-9688-4&amp;from=paste&amp;height=340&amp;id=u05b30e39&amp;originHeight=518&amp;originWidth=621&amp;originalType=binary&amp;ratio=1.100000023841858&amp;rotation=0&amp;showTitle=false&amp;size=72072&amp;status=done&amp;style=none&amp;taskId=ud83bddf0-c75a-4714-9995-4f2834dba15&amp;title=&amp;width=407.5426025390625" alt="image.png"></p> <ol start="3"><li>é€’å½’è°ƒç”¨çš„æ–¹æ³•éå¸¸å€¼å¾—å­¦ä¹ ï¼Œé€šè¿‡æ•°ç»„çš„ reduce()
<ol><li>ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯å›è°ƒå‡½æ•°ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯åˆå§‹å€¼ï¼Œé»˜è®¤ä¸º0</li> <li>å›è°ƒå‡½æ•°å†…éƒ¨åˆéœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ ä¸Šä¸€æ¬¡å¾ªç¯çš„è¿”å›å€¼ï¼Œç¬¬äºŒä¸ªæ˜¯å½“å‰é¡¹å–å¾—å€¼</li> <li>é€šè¿‡è¿™ä¸ªæ–¹æ³•èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³ é“¾å¼è°ƒç”¨ çš„é—®é¢˜ï¼ˆinfo.name.a ==&gt; å–åˆ° a çš„å€¼ï¼‰</li></ol></li> <li>è¿˜æœ‰ä¸€ä¸ªåé¢åŠ å…¥çš„ä»£ç ï¼Œæ˜¯ä¸€ä¸ªéå¸¸ç§€çš„æ“ä½œï¼š
<ol><li>å› ä¸ºè¿™ä¸ªå‡½æ•°åªä¼šåœ¨ Vue å®ä¾‹åˆ›å»ºçš„é‚£ä¸€åˆ»æ‰§è¡Œï¼Œæ‰€ä»¥å†…éƒ¨æ‰§è¡Œçš„åŒæ—¶åˆ›å»ºä¸€ä¸ª Dep å®ä¾‹ä½œä¸º<strong>å…¨å±€çš„ æ”¶é›†è€…</strong>ï¼Œç„¶åé€šè¿‡ åœ¨ get å’Œ set ä¸­å®ç° å‘å¸ƒè®¢é˜…çš„ç›¸å…³åŠŸèƒ½</li> <li>get ä¸­æ¯æ¬¡è°ƒç”¨ä¼šåˆ¤æ–­ Dep ç±»ä¸­æ˜¯å¦æœ‰ watcher å®ä¾‹ï¼Œå¦‚æœæœ‰å°± æ’å…¥ å…¨å±€æ”¶é›†è€…æ•°ç»„ä¸­ ï¼Œæ²¡æœ‰çš„è¯å°±ä¸ç†ä¼š</li> <li>set ä¸­æ¯æ¬¡è§¦å‘ä¼šä¿®æ”¹ data ä¸­å¯¹åº”çš„å€¼ä¸ºæœ€æ–°çš„å€¼ï¼Œæ¥ç€è§¦å‘ notify æ–¹æ³•é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…æ›´æ–°æ•°æ®</li></ol></li></ol> <h2 id="ğŸ˜¬åˆ›å»º-compile-æ¨¡å—"><a href="#ğŸ˜¬åˆ›å»º-compile-æ¨¡å—" class="header-anchor">#</a> ğŸ˜¬åˆ›å»º compile æ¨¡å—</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">compiler</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> vm</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// è·å– el å¯¹åº”çš„ dom å…ƒç´ </span>
  vm<span class="token punctuation">.</span>$el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>

  <span class="token comment">// åˆ›å»ºæ–‡æ¡£ç¢ç‰‡</span>
  <span class="token keyword">const</span> fragment <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$el<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fragment<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$el<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// è¿›è¡Œæ¨¡æ¿ç¼–è¯‘ ç”¨ä¸€ä¸ªå‡½æ•°å°è£…èµ·æ¥ï¼ŒåŒ…å«æ¨¡æ¿ç¼–è¯‘çš„å…¨è¿‡ç¨‹ï¼Œå°±æš‚æ—¶ä¸æŠ½ç¦»å‡ºå»äº†ï¼Œçœä¸€äº›äº‹</span>
  <span class="token function">replace</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span>

  vm<span class="token punctuation">.</span>$el<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span>

  <span class="token comment">// è´Ÿè´£å¯¹ dom æ¨¡æ¿è¿›è¡Œç¼–è¯‘  æ ¸å¿ƒä¸­çš„æ ¸å¿ƒå‡½æ•°</span>
  <span class="token keyword">function</span> <span class="token function">replace</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> regMustache <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\{\{\s*(\S+)\s*\}\}</span><span class="token regex-delimiter">/</span></span> <span class="token comment">//åŒ¹é…æ’å€¼è¡¨è¾¾å¼çš„æ­£åˆ™è¡¨è¾¾å¼</span>
    <span class="token comment">// åˆ¤æ–­æ˜¯å¦ä¸º æ–‡æœ¬èŠ‚ç‚¹</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> text <span class="token operator">=</span> node<span class="token punctuation">.</span>textContent
      <span class="token keyword">const</span> regResult <span class="token operator">=</span> regMustache<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
    	<span class="token comment">// å¦‚æœåŒ¹é…çš„ä¸ä¸ºç©º</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>regResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> value <span class="token operator">=</span> regResult<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> vm<span class="token punctuation">)</span>
        node<span class="token punctuation">.</span>textContent <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regMustache<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
        <span class="token keyword">new</span> <span class="token class-name">Watcher</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> regResult<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token parameter">newValue</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// node.textContent = node.textContent.replace(regResult[0], value)</span>
          node<span class="token punctuation">.</span>textContent <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regMustache<span class="token punctuation">,</span> newValue<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// åˆ¤æ–­æ˜¯å¦ä¸º input èŠ‚ç‚¹</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'INPUT'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// åˆ¤æ–­æ˜¯å¦æœ‰ v-model å±æ€§</span>
      <span class="token keyword">const</span> attrs <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>attributes<span class="token punctuation">)</span> <span class="token comment">//ä¼ªæ•°ç»„è½¬æ•°ç»„</span>
      <span class="token keyword">const</span> model <span class="token operator">=</span> attrs<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'v-model'</span><span class="token punctuation">)</span> <span class="token comment">//å°†å«æœ‰ v-model çš„èŠ‚ç‚¹çš„modelå€¼é€‰å‡ºæ¥ v-model=&quot;name&quot;,å­—ç¬¦ä¸²æ ¼å¼,ä¸ç¬¦åˆçš„ä¸ºnull</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> valueKey <span class="token operator">=</span> model<span class="token punctuation">.</span>value
        <span class="token keyword">const</span> value <span class="token operator">=</span> valueKey<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> vm<span class="token punctuation">)</span>
        <span class="token comment">// console.log(value)</span>
        node<span class="token punctuation">.</span>value <span class="token operator">=</span> value <span class="token comment">//ç°åœ¨åªæ˜¯é¦–æ¬¡ç¼–è¯‘çš„æ—¶å€™èƒ½åŒæ­¥</span>
        <span class="token comment">// ä½¿ç”¨å‘å¸ƒè®¢é˜…æ¨¡å¼å®ç°å•å‘ç»‘å®š</span>
        <span class="token keyword">new</span> <span class="token class-name">Watcher</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> valueKey<span class="token punctuation">,</span> <span class="token parameter">newValue</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          node<span class="token punctuation">.</span>value <span class="token operator">=</span> newValue
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">// å®ç°åŒå‘ç»‘å®š:å°±æ˜¯ç›‘å¬inputäº‹ä»¶,æ¯æ¬¡æ›´æ–°inputéƒ½å°†dataä¸­çš„å€¼è¿›è¡Œä¸€æ¬¡æ›´æ–°,è¿™ä¸€æ­¥åº”è¯¥ä¸æ¶‰åŠå‘å¸ƒè®¢é˜…æ¨¡å¼ v-model == @input +:value ,:value å’Œ :v-model æ²¡å•¥åŒºåˆ«,å®é™…ä¸Šå°±æ˜¯ç”¨äº†è¿™é‡Œçš„å‘å¸ƒè®¢é˜…æ¨¡å¼</span>
        node<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// å…ˆè·å–åˆ°è¦ä¿®æ”¹çš„ data ä¸­çš„å€¼,ç„¶åç”¨ input ä¸­çš„æ–°å€¼æ›¿æ¢å°±å¥½</span>
          <span class="token comment">// å–å€¼  æŒ‰ . åˆ†å‰²ä¹‹å å†ç”¨ sliceå–åˆ°å€’æ•°ç¬¬äºŒä¸ª</span>
          <span class="token keyword">const</span> keyArr <span class="token operator">=</span> valueKey<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span>
          <span class="token keyword">const</span> obj <span class="token operator">=</span> keyArr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> keyArr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">newobj<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> newobj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> vm<span class="token punctuation">)</span> <span class="token comment">//objæ˜¯åˆ° å€’æ•°ç¬¬äºŒä¸ªå±æ€§</span>
          <span class="token comment">// èµ‹å€¼ æ›¿æ¢</span>
          <span class="token comment">// obj[keyArr.length - 1] = e.target.value</span>
          <span class="token keyword">const</span> leafKey <span class="token operator">=</span> keyArr<span class="token punctuation">[</span>keyArr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">//å–åˆ°æœ€åä¸€ä¸ªå±æ€§</span>
          obj<span class="token punctuation">[</span>leafKey<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token comment">//å€’æ•°ç¬¬äºŒä¸ªå¼•ç”¨å€’æ•°ç¬¬ä¸€ä¸ª å±æ€§,æœ€ç»ˆå¾—åˆ°ç›®æ ‡å€¼çš„ä½ç½®,æ›¿æ¢å€¼å°±å¥½</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    node<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">replace</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <p>**Mainï¼šcompiler **çš„ä½œç”¨æ˜¯å°†ç”¨æˆ·å†™å¥½çš„ æ¨¡æ¿ç»™æå–åˆ° **æ–‡æ¡£ç¢ç‰‡ **ä¸­ï¼Œåœ¨è¿™æœŸé—´å¯¹è¿™ä¸ªæ¨¡æ¿è¿›è¡Œä¸€äº› æ“ä½œï¼Œç„¶åå°†ä¿®æ”¹å¥½çš„ æ¨¡æ¿ æ·»åŠ åˆ°ç»™é¡µé¢çš„èŠ‚ç‚¹ä¸­è¿›è¡Œæ¸²æŸ“
<strong>Thinkï¼š</strong></p> <ol><li>æ–‡æ¡£ç¢ç‰‡çš„ä½œç”¨å…¶å®<strong>ç±»ä¼¼äº template æ¨¡æ¿æ ‡ç­¾</strong>ä¸€æ ·ï¼Œå¯ä»¥æ•´ä¸ªæ·»åŠ å› app èŠ‚ç‚¹ä¸­ï¼Œç»“æ„ä¸ä¹‹å‰ä¸€æ ·ã€‚ä½†æ˜¯<strong>ä½¿ç”¨ createElement åˆ›å»ºæ–°èŠ‚ç‚¹</strong>ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªä¸è¿‡æ·»åŠ å›å» app èŠ‚ç‚¹çš„æ—¶å€™<strong>å¾—æŠŠå­èŠ‚ç‚¹ä¸€ä¸ªä¸€ä¸ªåœ°</strong> appendChild è¿‡å»ï¼Œä¸èƒ½ç›´æ¥æ•´ä½“ appendChild ï¼Œè¿™æ ·çš„è¯å°±ä¼šå˜å¾—å¤šäº†ä¸€ä¸ªèŠ‚ç‚¹åœ¨ app ä¸­ï¼Œå¯èƒ½ä¼šå½±å“æ ·å¼ä¹‹ç±»çš„ !</li> <li>ä¸€å¼€å§‹ä¸çŸ¥é“ appendChild å±…ç„¶æ˜¯ç§»åŠ¨å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯ä¼šè‡ªåŠ¨åˆ é™¤åŸèŠ‚ç‚¹çš„å¯¹åº”å†…å®¹ï¼Œè¿˜å»éªŒè¯äº†ä¸€ä¸‹ã€‚åé¢çœ‹äº†æ–‡æ¡£ï¼Œå‘ç° MDN æ–‡æ¡£ä¸­å†™çš„ä¹Ÿæ˜¯ä¼šç§»åŠ¨çš„ï¼å°±ç®—æ˜¯å­¦ä¼šäº†ä¸€äº›ã€‚ï¼ˆä½†æ˜¯åé¢é€šè¿‡ creatElement çš„æ–¹å¼ï¼Œç›´æ¥appendæ•´ä½“ï¼Œä¹‹å é‚£ä¸ª createElement çš„èŠ‚ç‚¹è¿˜æ˜¯å­˜åœ¨å†…å®¹çš„ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯å› ä¸ºæ•´ä½“ç§»åŠ¨ï¼Œæ‰€ä»¥è·å–çš„è¿˜æ˜¯è¿™åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¤§æ¦‚ç‡æ˜¯çš„ï¼Œä¸ç„¶å°±æ˜¯æ–‡æ¡£æ¼æ´äº† å“ˆå“ˆå“ˆå“ˆï¼‰</li></ol> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/20359134/1679646135054-123754ae-6c9a-4efb-99f8-afbe5f791931.png#averageHue=%23f6f4f2&amp;clientId=uc69149a7-9688-4&amp;from=paste&amp;height=394&amp;id=uc6364613&amp;originHeight=433&amp;originWidth=822&amp;originalType=binary&amp;ratio=1.100000023841858&amp;rotation=0&amp;showTitle=false&amp;size=44813&amp;status=done&amp;style=none&amp;taskId=u4436ccfb-590f-4d2b-a729-7b1f0180785&amp;title=&amp;width=747.2727110760275" alt="62f1f9e4c03c9908e2e1e89753981dc.png"> <strong>Studyï¼š</strong></p> <ol><li><strong>å‰è¨€ï¼š</strong> <ol><li>ç”¨åˆ°äº†ä¸å°‘è‡ªå·±ä¸ç†Ÿæ‚‰çš„ api ï¼Œå€¼å¾—å­¦ä¹ ï¼š<strong>createDocumentFragment</strong> ã€ <strong>appendChild</strong> ã€ <strong>node.firstChild</strong> ã€** node.nodeType** ã€** node.childNodes** -- è¿”å›å€¼æ˜¯ nodelist ç±»å‹çš„æ•°ç»„ ã€æ–‡æœ¬èŠ‚ç‚¹æœ‰ä¸€ä¸ªå±æ€§ï¼š<strong>textContent</strong> æ˜¯çœŸæ­£çš„æ–‡æœ¬ï¼Œ<strong>æ–‡æœ¬èŠ‚ç‚¹ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡</strong>ã€‚</li> <li>åŒå‘æ•°æ®ç»‘å®šä¸­ä¹Ÿæ¶‰åŠäº†ï¼š<strong>node.nodeType</strong>ã€<strong>node.tagName</strong>ã€<strong>Array.from</strong>ã€<strong>attrs.find</strong>ã€Â <strong>keyArr.slice</strong>ï¼Œä½œç”¨å„ä¸ç›¸åŒï¼Œä½†æ˜¯éƒ½æ¯”è¾ƒè€ƒéªŒåŠŸåº•ã€‚å› ä¸ºæœ‰å¾ˆå¤šå­—ç¬¦ä¸²å’Œæ•°ç»„çš„æ–¹æ³•ï¼Œä½œç”¨éƒ½æŒºåƒçš„ï¼Œçœ‹è‡ªå·±æ€ä¹ˆé€‰æ‹©ï¼</li></ol></li> <li>ğŸ’¥é¦–å…ˆæ˜¯å‚æ•°ï¼Œéœ€è¦è·å– el å’Œ vm ï¼Œä¹Ÿå°±æ˜¯æ‹¿åˆ° Vue å®ä¾‹ä»¥åŠæŒ‚è½½çš„èŠ‚ç‚¹</li> <li>ğŸ’¥æ¥ç€æ˜¯è·å–åˆ°å¯¹åº”çš„èŠ‚ç‚¹ï¼Œåˆ›å»º æ–‡æ¡£ç¢ç‰‡ åå°†èŠ‚ç‚¹å†…çš„å…ƒç´ éƒ½åŠ å…¥åˆ° æ–‡æ¡£ç¢ç‰‡ ä¸­</li> <li><strong>ğŸ—¯ï¸ğŸ¤ ã€é‡ç‚¹ä¸­çš„é‡ç‚¹ã€‘</strong>ï¼šé€šè¿‡ <strong>replace å‡½æ•°</strong> å¯¹ æ–‡æ¡£ç¢ç‰‡ä¸­ çš„ èŠ‚ç‚¹ è¿›è¡Œå¤„ç†ï¼Œä»¥è¾¾åˆ°æˆ‘ä»¬æœ€ç»ˆæƒ³è¦çš„æ•ˆæœï¼š
<ol><li>å°† æ¨¡æ¿ ä¸­çš„ å ä½ç¬¦ æ›¿æ¢ä¸º data ä¸­çš„å†…å®¹ï¼Œæ¥ç€ä½¿ç”¨ å‘å¸ƒè®¢é˜… ä»¥åŠ æ•°æ®åŠ«æŒ å¯¹ data ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡Œ ç›‘å¬ï¼Œå½“å‘ç°æ•°æ®å˜åŒ–åå°±æ›´æ–° æ¨¡æ¿ çš„å†…å®¹</li> <li>ã€æ€è€ƒğŸ•µï¸ã€‘çœ‹äº†è¿™ä¸ª æ›´æ–°æ¨¡æ¿ çš„ä»£ç ï¼Œå‘ç°æ ¹æ® data ä¸­æ•°æ®ä¿®æ”¹ï¼Œå®ƒä¿®æ”¹çš„æ˜¯ æ–‡æ¡£ç¢ç‰‡ ä¸­çš„ æ¨¡æ¿å†…å®¹ï¼Œé€šè¿‡ä»£ç æŠŠæ¨¡æ¿æ›¿æˆçœŸæ­£çš„å†…å®¹ä¹‹åå°±æŠŠæ•´ä¸ª æ–‡æ¡£ç¢ç‰‡ ç§»åŠ¨åˆ° #app èŠ‚ç‚¹ä¸­äº†ã€‚é‚£ä¹ˆå¦‚æœæ•°æ®åˆå‘ç”Ÿä¿®æ”¹ï¼Œæ˜¯ç›´æ¥ä¿®æ”¹ html é¡µé¢ä¸­çš„å†…å®¹å®ç°å®ç°é‡æ’ï¼Œè¿˜æ˜¯åˆå°†æ‰€æœ‰çš„åŠ å…¥åˆ°æ–‡æ¡£ç¢ç‰‡é‡æ–°ç¼–è¯‘ä¸€æ¬¡å‘¢ï¼Ÿ
<ol><li>è‡ªå·±è§£ç­”ï¼šé¦–å…ˆæ˜¯ä¸ä¼šé‡æ–°åŠ å…¥åˆ°æ–‡æ¡£ç¢ç‰‡çš„ï¼Œå› ä¸ºæ²¡æœ‰é‡æ–°è°ƒç”¨ compiler å‡½æ•°</li> <li>å…¶æ¬¡æ›´æ–°å†…å®¹çš„ç†è®ºæ˜¯ï¼šæ ¹æ® data ä¸­çš„æ•°æ®å˜åŒ–ï¼Œè§¦å‘ set ï¼Œç„¶å set å»è°ƒç”¨ è®¢é˜…è€…å®ä¾‹çš„ updated æ–¹æ³•</li> <li>updated æ–¹æ³•çš„ä½œç”¨æ˜¯è·å–æ›´æ–°åçš„å€¼ï¼Œç„¶åå°†è¿™ä¸ªå€¼ä¼ é€’ç»™ cb å›è°ƒå‡½æ•°è¿›è¡Œæ›´æ–°</li> <li>cb å›è°ƒå‡½æ•°çš„ä½œç”¨å°±æ˜¯æˆ‘æƒ³é—®çš„é—®é¢˜çš„å…³é”®äº†ï¼šcb å†…éƒ¨æœ‰å½¢æˆä¸€ä¸ªé—­åŒ…ï¼Œå¯ä»¥æ‹¿åˆ°è¿™ä¸ªå®ä¾‹å¯¹åº”çš„ node èŠ‚ç‚¹ï¼Œå°†è¿™ä¸ª node èŠ‚ç‚¹çš„ textContent çš„å ä½ç¬¦ æ›¿æ¢ä¸º æœ€æ–°çš„å€¼ï¼Œé€šè¿‡è¿™ç§æ–¹å¼å®Œæˆæ•°æ®çš„æ›´æ–°</li></ol></li> <li>ã€ç»§ç»­æ€è€ƒğŸ•µï¸ã€‘å¾ˆå¥½ï¼Œä¸Šä¸€ä¸ªé—®é¢˜ç®—æ˜¯è§£å†³äº†ï¼Œåˆæ¥ä¸€ä¸ªé—®é¢˜ï¼šæ—¢ç„¶ç¬¬ä¸€æ¬¡å°±å°†å ä½ç¬¦æ›¿æ¢ä¸ºå†…å®¹ï¼Œå¹¶ä¸”æ¸²æŸ“å¥½äº†ï¼Œé‚£ä¹ˆä¿®æ”¹æ•°æ®ä¹‹åï¼Œwatcher å†…éƒ¨è¿˜æ˜¯ é€šè¿‡æ›¿æ¢ regMustache ä¸º æœ€æ–°çš„å€¼ï¼Œé—®é¢˜æ˜¯è¿˜åŒ¹é…å¾—åˆ°è¿™ä¸ª regMustache å—ï¼Ÿæ˜¯æ€ä¹ˆåŒ¹é…åˆ°çš„ï¼Ÿ</li></ol></li> <li>ğŸ’¥ç¼–è¯‘å®Œæˆåé€šè¿‡ <code>vm.$el.appendChild(fragment)</code> <strong>å°†æ–‡æ¡£ç¢ç‰‡æ’å…¥å› #app èŠ‚ç‚¹</strong>ä¸­è¿›è¡Œæ¸²æŸ“ï¼ï¼ï¼</li></ol> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/20359134/1679639107294-34e84687-377a-4f16-9bf8-25a1e07dcc8c.png#averageHue=%23242932&amp;clientId=uc69149a7-9688-4&amp;from=paste&amp;height=445&amp;id=u2a9ab429&amp;originHeight=489&amp;originWidth=977&amp;originalType=binary&amp;ratio=1.100000023841858&amp;rotation=0&amp;showTitle=false&amp;size=89078&amp;status=done&amp;style=none&amp;taskId=u77bfe754-83fe-40dd-92d0-8c524c83191&amp;title=&amp;width=888.1817989309961" alt="image.png"></p> <hr> <ol start="6"><li>ğŸ‘¹replace æ–¹æ³•ä¸­çš„<strong>å…·ä½“æµç¨‹</strong>ï¼š
<ol><li>é¦–å…ˆæ˜¯è®¾ç½®äº†ä¸€ä¸ª<strong>åŒ¹é… Mustache</strong> çš„<strong>æ­£åˆ™è¡¨è¾¾å¼</strong></li> <li>æ¥ç€åˆ¤æ–­ nodeType** ç­›é€‰å‡º æ–‡æœ¬èŠ‚ç‚¹**ï¼Œç„¶åé€šè¿‡ <strong>å ä½ç¬¦</strong> çš„å†…å®¹ æ‰¾åˆ° data ä¸­å¯¹åº”çš„æ•°æ®ï¼Œç„¶åä½¿ç”¨è¿™ä¸ªæ•°æ® **æ›¿æ¢ **æ‰é‚£ä¸ªå ä½ç¬¦</li> <li>æœ€å å°†è¿™æ®µ <strong>æ›´æ–°æ•°æ®çš„ä»£ç </strong> ä½œä¸º watcher å®ä¾‹çš„<strong>å›è°ƒå‡½æ•° çš„å†…å®¹</strong>ï¼Œåˆ›å»ºä¸€ä¸ª watcher å®ä¾‹å¯¹è±¡
<ol><li>è¿™ä¸ªå®ä¾‹å¯¹è±¡ä¸€åˆ›å»ºå°±ä¼šæ‰§è¡Œæ„é€ å‡½æ•°ä¸­å¯¹åº”çš„å‡½æ•°ï¼Œæœ€ç»ˆçš„ç›®çš„æ˜¯è¿™ä¸ª watcher ä¼šè¢«æ”¶é›†è€…ç®¡ç†èµ·æ¥ï¼Œå½“è¿™ä¸ªèŠ‚ç‚¹ä¸­çš„æ•°æ®å¯¹åº”çš„** data ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–<strong>ä¼šè§¦å‘è¿™ä¸ª watcher çš„å›è°ƒå‡½æ•°å¯¹ æ¨¡æ¿ è¿›è¡Œæ›´æ–°ï¼Œå®ç°</strong>å•å‘æ•°æ®ç»‘å®š**</li></ol></li></ol></li> <li>ğŸ‘ºä¸Šä¸€ç‚¹ä¸­æ˜¯è®²åŒ¹é… æ’å€¼è¡¨è¾¾å¼ çš„ï¼Œæˆ‘ä»¬è¿˜å¯¹** input è¡¨å•**ä¹Ÿåšäº†ä¸€ä¸ªç±»ä¼¼çš„å¤„ç†
<ol><li>ğŸ’–é¦–å…ˆä¹Ÿæ˜¯åˆ¤æ–­ nodeType ç±»å‹é€‰å‡º input èŠ‚ç‚¹</li> <li>æ¥ç€å°†å…·æœ‰ v-model å±æ€§çš„èŠ‚ç‚¹å†ç­›é€‰å‡ºæ¥</li> <li>æ‹¿åˆ° v-model å¯¹åº”çš„ å ä½ç¬¦ï¼Œé€šè¿‡è¿™ä¸ªå»ç´¢å¼• data ä¸­å¯¹åº”çš„å†…å®¹</li> <li>ğŸ’–æ‹¿åˆ° data ä¸­å¯¹åº”çš„å†…å®¹å æ›¿æ¢æ‰ input èŠ‚ç‚¹çš„ value å€¼</li> <li>ğŸ’–åŒæ ·çš„ï¼Œä¸ºäº†èƒ½å¤Ÿå®ç°å•å‘æ•°æ®ç»‘å®šï¼Œè®© data ä¸­å¯¹åº”çš„å€¼ä¿®æ”¹æ—¶ï¼Œinput ä¸­çš„ value ä¹Ÿå¯¹åº”çš„ä¿®æ”¹ï¼Œæˆ‘ä»¬ä¹Ÿè¦åˆ›å»ºä¸€ä¸ª watcher å®ä¾‹ï¼Œå¹¶ä¸”å°†<strong>è¿™ä¸ª æ›¿æ¢å†…å®¹ çš„æ“ä½œ</strong>ä½œä¸º cb å›è°ƒå‡½æ•°çš„å†…å®¹</li> <li><strong>tips</strong>ï¼šå†™åˆ°è¿™é‡Œæˆ‘çªç„¶æ˜ç™½äº†ï¼Œ<strong>æ•°æ®åŠ«æŒ <strong>æ˜¯å¯¹ data ä¸­çš„æ•°æ®è¿›è¡ŒåŠ«æŒï¼Œå½“ data ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œä¼šè§¦å‘å¯¹åº”çš„ get å’Œ set æ“ä½œã€‚è€Œ <strong>å‘å¸ƒè®¢é˜…æ¨¡å¼</strong> å°±æ˜¯è®©è§¦å‘ set æ“ä½œçš„æ—¶å€™ï¼Œå¯¹æ¨¡æ¿ä¸­çš„æ•°æ®å†…å®¹è¿›è¡Œæ›´æ–°ã€‚æ‰€ä»¥</strong>å•å‘æ•°æ®ç»‘å®šä¹Ÿå°±æ˜¯ data ä¸­çš„å†…å®¹å‘ç”Ÿå˜åŒ–çš„åŒæ—¶å»ä¿®æ”¹æ¨¡æ¿ä¸­çš„å†…å®¹ï¼Œå®ç°å®æ—¶æ›´æ–°ï¼ï¼ï¼</strong></li></ol></li> <li>å¯¹äº input è¡¨å•åªå®ç° å•å‘æ•°æ®ç»‘å®š åªèƒ½è¯´æ˜¯ç†Ÿæ‚‰äº†ä¸€é åŸç†æ–¹æ³•ï¼Œæœ¬è´¨å’Œ mustache çš„å•å‘æ•°æ®ç»‘å®šæ²¡å•¥åŒºåˆ«ï¼Œä½†æ˜¯ è¡¨å• çš„<strong>åŒå‘æ•°æ®ç»‘å®š</strong>å°±æ˜¯ä¸€ä¸ªæ–°ä¸€äº›çš„çŸ¥è¯†äº†ï¼Œä¸ç®—éš¾ä½†æ˜¯è›®è€ƒéªŒåŠŸåº•çš„ï¼
<ol><li>ğŸ˜ºé¦–å…ˆæ˜¯å¯¹å½“å‰èŠ‚ç‚¹è¿›è¡Œ input äº‹ä»¶ç›‘å¬ï¼Œå›è°ƒå‡½æ•°ä¸­ä¼ ä¸€ä¸ª eï¼Œå¯ä»¥æ‹¿åˆ° è¡¨å•ä¸­çš„ æ–°å€¼</li> <li>ğŸ˜ºå…¶æ¬¡æ˜¯åœ¨å›è°ƒå‡½æ•°ä¸­é€šè¿‡æ‰¾åˆ°<strong>è¦æ›´æ–°æ•°æ®çš„ä½ç½®</strong>ï¼Œè¿™ä¸€æ­¥æ¯”è¾ƒç‰¹æ®Šï¼šé€šè¿‡ v-model çš„å ä½ç¬¦å»åŒ¹é… å€’æ•°ç¬¬äºŒä¸ªå¯¹è±¡ï¼ï¼ˆæœ‰ç‚¹ç»•ï¼Œä½†æ˜¯åŸç†å¾ˆå¥½ç†è§£ï¼Œä¾‹å¦‚ï¼š obj.info.name,æˆ‘ä»¬è¦ä¿®æ”¹ name ï¼Œé‚£ä¹ˆå°±è¦æ‹¿åˆ° obj.info ï¼Œç„¶åé€šè¿‡ obj.info[name] çš„æ–¹å¼å»ä¿®æ”¹å€¼ï¼‰</li> <li>ğŸ˜ºåŒ¹é…åˆ°ä¹‹å å°† ä½ç½®ä¸Šçš„å€¼ æ›¿æ¢ä¸º æ–°å€¼ å°±å¥½äº†</li></ol></li> <li>å¦‚æœæ²¡æœ‰åŒ¹é…åˆ° æ–‡æœ¬èŠ‚ç‚¹ ä»¥åŠ input èŠ‚ç‚¹çš„è¯ï¼Œé‚£ä¹ˆå°±ä¸€å®šæ˜¯å†…éƒ¨è¿˜æœ‰å­èŠ‚ç‚¹ï¼Œé€šè¿‡éå† node.childNodes çš„æ–¹å¼è¿›è¡Œ <strong>replace é€’å½’</strong> <ol><li><strong>ä¸ç”¨æ‹…å¿ƒä¼šæ­»å¾ªç¯</strong>ï¼Œå› ä¸ºæœ€åä¸€ä¸ªèŠ‚ç‚¹ä¸€å®šä¼šæ˜¯ æ–‡æœ¬èŠ‚ç‚¹ï¼Œè¿™ä¸ª nodeType å°†ç©ºç™½ç¬¦å¦‚æ¢è¡Œã€ç©ºæ ¼ä¹Ÿå½“æˆäº† ç©ºç™½ç¬¦</li></ol></li></ol> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/20359134/1679639142557-a8fb4965-8468-448a-8f42-eeb14d5136ff.png#averageHue=%23242a32&amp;clientId=uc69149a7-9688-4&amp;from=paste&amp;height=320&amp;id=uc0ebcc68&amp;originHeight=352&amp;originWidth=945&amp;originalType=binary&amp;ratio=1.100000023841858&amp;rotation=0&amp;showTitle=false&amp;size=58049&amp;status=done&amp;style=none&amp;taskId=u58cfde09-372f-4bdf-80b1-d24f9887042&amp;title=&amp;width=859.0908904706155" alt="image.png"></p> <h2 id="ğŸ˜åˆ›å»º-æ”¶é›†è€…ç±»-ä»¥åŠ-è®¢é˜…è€…-ç±»"><a href="#ğŸ˜åˆ›å»º-æ”¶é›†è€…ç±»-ä»¥åŠ-è®¢é˜…è€…-ç±»" class="header-anchor">#</a> ğŸ˜åˆ›å»º æ”¶é›†è€…ç±» ä»¥åŠ è®¢é˜…è€… ç±»</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// åˆ›å»ºæ”¶é›†è€…ç±»</span>
<span class="token keyword">class</span> <span class="token class-name">Dep</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">//å¯ä»¥ä¼˜åŒ–ä¸º å•ä¾‹æ¨¡å¼</span>
  <span class="token punctuation">}</span>
  <span class="token function">addSub</span><span class="token punctuation">(</span><span class="token parameter">watcher</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>watcher<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// åˆ›å»ºè®¢é˜…è€…ç±»</span>
<span class="token keyword">class</span> <span class="token class-name">Watcher</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">vm<span class="token punctuation">,</span> key<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>vm <span class="token operator">=</span> vm
    <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key
    <span class="token keyword">this</span><span class="token punctuation">.</span>cb <span class="token operator">=</span> cb

    Dep<span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token keyword">this</span>
    key<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> vm<span class="token punctuation">)</span>
    Dep<span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span>
  <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>key<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vm<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>key<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cb</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <ol><li>æ”¶é›†è€…ç±»å†…éƒ¨å®é™…å°±<strong>ç®¡ç†ä¸‰ä¸ªä¸œè¥¿</strong>ï¼ŒåŸºæœ¬ä¸Šä¸éœ€è¦ä¿®æ”¹é‡Œé¢çš„ä»£ç 
<ol><li>ä¸€ä¸ªç®¡ç†è®¢é˜…è€…çš„æ•°ç»„ï¼Œä¸€èˆ¬æ¥è¯´å…¨å±€åªèƒ½æœ‰ä¸€ä¸ªï¼Œå¯ä»¥ä½¿ç”¨å•ä¾‹æ¨¡å¼ä¼˜åŒ–ä¸€ä¸‹ä»£ç ï¼Œé˜²æ­¢åˆ›å»º Dep å®ä¾‹çš„æ—¶å€™åˆåˆ›å»ºä¸€ä¸ª æ•°ç»„ï¼›ä¸€ä¸ªæ˜¯ æ·»åŠ  Watcher å®ä¾‹ çš„æ–¹æ³•ï¼›ä¸€ä¸ªæ˜¯ å‘å¸ƒé€šçŸ¥ çš„æ–¹æ³•</li></ol></li></ol> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/20359134/1679639403710-63b0a336-fa63-46e3-9593-b1a3859fe526.png#averageHue=%23232931&amp;clientId=uc69149a7-9688-4&amp;from=paste&amp;height=218&amp;id=uac56eb46&amp;originHeight=386&amp;originWidth=603&amp;originalType=binary&amp;ratio=1.100000023841858&amp;rotation=0&amp;showTitle=false&amp;size=37440&amp;status=done&amp;style=none&amp;taskId=u51571ae7-2b4b-4cec-84c5-6b3e8797767&amp;title=&amp;width=341.1647644042969" alt="image.png"></p> <ol start="2"><li>è®¢é˜…è€…ç±»å†…éƒ¨æœ‰ä¸€äº›æ¯”è¾ƒç‰›çš„æŠ€å·§ï¼š
<ol><li>éœ€è¦ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼švueå®ä¾‹ï¼Œå¯¹åº”å…ƒç´ çš„ key(å¯èƒ½æ˜¯ obj.info.name è¿™ç§å½¢å¼ï¼Œå°±æ˜¯å ä½ç¬¦å˜›)ï¼Œè¿˜æœ‰ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç”¨äºå½“æ•°æ®æ›´æ–°çš„æ—¶å€™æ‰§è¡Œçš„ã€‚<strong>è¿™ä¸ªå›è°ƒå‡½æ•°éœ€è¦ä»€ä¹ˆå‚æ•°æ˜¯åœ¨ watcher å®ä¾‹è¢«åˆ›å»ºçš„æ—¶å€™å®šä¹‰çš„ï¼Œä¸ç±»çš„å®šä¹‰æ— å…³</strong></li> <li>**ä¸‰è¡Œç²¾å½©çš„ä»£ç å®ç° **è®¢é˜…è€…å®ä¾‹è¢«æ·»åŠ åˆ° æ”¶é›†è€…çš„æ•°ç»„ä¸­
<ol><li><strong>ç¬¬ä¸€è¡ŒğŸ’˜</strong>ï¼šä½œç”¨æ˜¯è®©å½“å‰çš„ watcher å®ä¾‹ç»‘å®šåˆ° Dep ç±»çš„ç±»å±æ€§ä¸­ï¼Œå…¶ç›®çš„å®é™…ä¸Šå°±æ˜¯ä¼ å‚ï¼Œè®©è¿™ä¸ªå®ä¾‹å°½é‡æˆä¸ºé¡¶å±‚å¯¹è±¡çš„å±æ€§ï¼Œå¥½è®©é¡¶å±‚å¯¹è±¡ä¸‹é¢çš„å…¶ä»–å¯¹è±¡å–å€¼åˆ¤æ–­æ˜¯å¦å­˜åœ¨è¯¥å€¼ã€‚è¿™æ ·çš„æ–¹å¼å…¶ä»–åœ°æ–¹ä¹Ÿæœ‰è§è¿‡ï¼Œç±»ä¼¼çš„æœ‰é€šè¿‡åŸå‹é“¾çš„ç»§æ‰¿æ–¹å¼ï¼Œå°†å…¬å…±çš„ä»£ç æ”¾åœ¨åŸå‹ä¸­ä½œä¸ºå…±ç”¨</li> <li><strong>ç¬¬äºŒè¡ŒğŸ’˜</strong>ï¼šä½œç”¨æ˜¯è·å– data ä¸­å¯¹åº”çš„å€¼ï¼Œè§¦å‘å®ƒçš„ getter æ–¹æ³•ï¼›è¿™ä¸ª getter æ–¹æ³•å†…éƒ¨ä¼šåˆ¤æ–­ Dep ä¸Šæ˜¯å¦ç»‘å®šäº† target ï¼Œå¦‚æœç»‘å®šäº†å°±å°†æ­¤å€¼æ’å…¥åˆ° dep å®ä¾‹çš„æ•°ç»„ä¸­ ï¼ˆå·§å¦™ä¹‹å¤„å°±åœ¨è¿™ï¼‰</li> <li><strong>ç¬¬ä¸‰è¡ŒğŸ’˜</strong>ï¼šè¿™ä¸€æ“ä½œçš„ç›®çš„å°±æ˜¯è®© watcher å®ä¾‹è¢«åˆ›å»ºçš„åŒæ—¶å°†å®ƒä¼ å…¥ æ”¶é›†è€…æ•°ç»„ï¼Œç›®çš„è¾¾åˆ°ä¹‹åï¼Œè¿™ä¸ª target å°±å¯ä»¥ä» Dep ä¸­åˆ é™¤äº†ï¼Œä»¥å…å¯¹åç»­ getter çš„è°ƒç”¨é€ æˆå¹²æ‰°</li> <li><strong>ç–‘æƒ‘</strong>ğŸ—¯ï¸ğŸ—¯ï¸ï¼šå¯èƒ½ä¼šäº§ç”Ÿä¸€ä¸ªå›°æƒ‘ï¼Œéšä¾¿å–ä¸€ä¸ªæ•°ï¼Œåªè¦è§¦å‘ getter ä¸å°±å¥½äº†å—ï¼Ÿæ—¢ç„¶ è§¦å‘ getter å°±ä¸€å®šä¼šæ£€æŸ¥ Dep ä¸Šæ˜¯å¦æœ‰ getterï¼Œé‚£ä¸ºä»€ä¹ˆä¸€å®šè¦ç´¢å¼•åˆ° key è¡¨ç¤ºçš„æœ€é‡Œé¢çš„å…ƒç´ å‘¢ï¼Ÿ</li> <li><strong>è§£ç­”ï¼š</strong></li></ol></li></ol></li></ol> <blockquote><div class="language- extra-class"><pre><code>     1. ç¡®å®ï¼Œå•ä»è¿™ä¸ªä»£ç æ¥çœ‹ï¼Œæ˜¯åªè¦è§¦å‘ getter å°±åˆ¤æ–­æ˜¯å¦å­˜åœ¨å®ä¾‹ã€‚ä½†æ˜¯è¿™åªæ˜¯ç®€å•çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œä¸ºäº†è®©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£ vue çš„æ·±å±‚æ¬¡åŸç†æ‰æ²¡æœ‰å°†å‘å¸ƒè®¢é˜…å†™çš„é‚£ä¹ˆå®Œç¾ï¼ŒçœŸè¦æ¢ç©¶ï¼Œé‚£ä¹ˆ depSub æ•°ç»„å¯èƒ½å°±æ˜¯ä»¥å¯¹è±¡çš„å½¢å¼å­˜åœ¨äº†ï¼Œé€šè¿‡ key ä¿å­˜ è®¢é˜…å¯¹è±¡ï¼Œæ¯ä¸€ä¸ªè®¢é˜…å¯¹è±¡çš„å€¼éƒ½æ˜¯æ•°ç»„ï¼Œå­˜æ”¾ä¸€ä¸ªä¸ªå›è°ƒï¼Œè¿™æ—¶å€™å°±ä¸æ˜¯ç®€å•çš„åœ¨ get ä¸­ push ä¸€ä¸ªå®ä¾‹å°±å¥½äº†ï¼Œè¯´ä¸å®šå¾—åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦æœ‰å¯¹åº”ç»‘å®šçš„ keyï¼Œç„¶åå°†å®ä¾‹æ’å…¥ã€‚
</code></pre></div></blockquote> <hr> <blockquote><div class="language- extra-class"><pre><code>     2. è¡¥å……ï¼šè¿™ä¸ªå›ç­”**å¯èƒ½åªæ˜¯å¼•å‡ºäº† å‘å¸ƒè®¢é˜… çš„ä¸å®Œå–„**ï¼Œå¹¶æ²¡æœ‰ç»™å‡ºä¸€ä¸ªå®Œç¾çš„å®Œå–„æ–¹æ³•ï¼ŒåŒæ—¶**å¯èƒ½ä¹Ÿæ²¡æœ‰è§£å†³é—®é¢˜ä¸­ â€œåªè¦è§¦å‘ getter å°±å¥½äº†â€è¿™ä¸ªé—®é¢˜**ï¼Œä½†æˆ‘è®¤ä¸ºåœ¨å‘å¸ƒè®¢é˜…æ¨¡å¼å®Œå–„çš„è¿‡ç¨‹ä¸­ä¼šæ¶‰åŠåˆ°è¿™ä¸€ä¸ªç‚¹çš„ã€‚å¦‚æœå®Œå–„äº†ä¹Ÿæ²¡æœ‰æ¶‰åŠåˆ°ï¼Œé‚£ä¹ˆç¡®å®å¯ä»¥æƒ³ä¸ªæ–¹æ³•ä¸è®© watcher æ„é€ å™¨å»ç´¢å¼•å¯¹åº”çš„å€¼ï¼Œè€Œæ˜¯å­˜ä¸€ä¸ª èƒ½å¤Ÿè§¦å‘ getter çš„å˜é‡ï¼Œæ¯æ¬¡åˆ›å»ºå®ä¾‹çš„æ—¶å€™è·å–ä¸€ä¸‹è¿™ä¸ª getter ã€‚ï¼ï¼ç”šè‡³ç›´æ¥åœ¨ watcher å†…éƒ¨è°ƒç”¨ addSub çš„æ–¹æ³•ï¼Œåˆ›å»ºå®ä¾‹äº†å°±ç›´æ¥è¢«æ”¶é›†èµ·æ¥ï¼ï¼ï¼ï¼ˆä¸ºä»€ä¹ˆä¸å‘¢ï¼Ÿæˆ‘è®¤ä¸ºæŒºçœäº‹çš„ï¼Œä¸ºä»€ä¹ˆè¦åœ¨ getter ä¸­è§¦å‘å‘¢ï¼Ÿï¼‰ï¼ˆåˆæ¥ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘æš‚æ—¶ä¸æƒ³å†è§£ç­”äº†ï¼‰
</code></pre></div></blockquote> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/20359134/1679642897941-3f5bbcd0-dde7-46ad-b0b8-dfa1c5f9ab09.png#averageHue=%23232930&amp;clientId=uc69149a7-9688-4&amp;from=paste&amp;height=272&amp;id=uabf15e4a&amp;originHeight=299&amp;originWidth=1352&amp;originalType=binary&amp;ratio=1.100000023841858&amp;rotation=0&amp;showTitle=false&amp;size=55173&amp;status=done&amp;style=none&amp;taskId=u6aaf915c-193f-42e9-ac83-059b1d18111&amp;title=&amp;width=1229.0908824510816" alt="image.png"></p> <hr> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/20359134/1679643812646-b9028909-b7c5-4484-b3f3-09cfe4296d13.png#averageHue=%23232830&amp;clientId=uc69149a7-9688-4&amp;from=paste&amp;height=692&amp;id=ufe6446eb&amp;originHeight=761&amp;originWidth=1102&amp;originalType=binary&amp;ratio=1.100000023841858&amp;rotation=0&amp;showTitle=false&amp;size=114637&amp;status=done&amp;style=none&amp;taskId=u8b2f3cb0-a842-47d1-9f77-97183191c8c&amp;title=&amp;width=1001.818160104358" alt="image.png"></p> <div class="language- extra-class"><pre><code>  3. æœ€åï¼Œé™¤äº†æ„é€ å™¨ï¼Œè¿˜æœ‰ä¸€ä¸ª** update å®ä¾‹æ–¹æ³•**ï¼š
     1. é¦–å…ˆæ˜¯ é€šè¿‡ åˆ›å»ºå®ä¾‹çš„æ—¶å€™ ä¼ å…¥çš„ vm å’Œ key è·å–åˆ° data ä¸­ä¿å­˜çš„å€¼ï¼ˆå› ä¸º update çš„è§¦å‘æ˜¯åœ¨ setter ä¸­ï¼Œä¸” æ˜¯æ›´æ–°å®Œæ•°æ®ä¹‹åï¼Œæ‰€ä»¥**æ‹¿åˆ°çš„ä¸€å®šæ˜¯æ›´æ–°ä¹‹åçš„æ•°æ®**ï¼Œæœ€æ–°å€¼ï¼‰
     2. æ¥ç€æ˜¯**è°ƒç”¨å½“å‰å®ä¾‹çš„ cb å›è°ƒå‡½æ•°**ï¼Œå¹¶ä¸”å°†æ–°å€¼ä¼ å…¥ï¼Œ**è¿›è€Œå®ç° å•å‘æ•°æ®ç»‘å®š**ï¼ï¼ï¼å°±æ˜¯è°ƒç”¨äº†ä¸€ä¸‹ cbï¼ˆnewValueï¼‰ï¼Œå†…éƒ¨å¯¹ æ¨¡æ¿ä¸­çš„æ•°æ®è¿›è¡Œæ›¿æ¢ï¼Œå®ç°äº†å•å‘æ•°æ®ç»‘å®šï¼ï¼ï¼
</code></pre></div><h1 id="ğŸ’Ÿæ€»ç»“"><a href="#ğŸ’Ÿæ€»ç»“" class="header-anchor">#</a> ğŸ’Ÿæ€»ç»“</h1> <ol><li>ğŸ˜¹ğŸ˜¹ğŸ˜¹è¿™æ¬¡å­¦ä¹ ä¸­èŠ±äº†<strong>ä¸‰å¤©</strong>æ—¶é—´ï¼ŒåŒ…æ‹¬ï¼šçœ‹è§†é¢‘ã€æ‰‹æ•²ã€åšç¬”è®°</li> <li>âœ‹âœ‹âœ‹å­¦ä¹ åˆ°çš„ï¼š
<ol><li>é€šè¿‡ç±»çš„æ–¹å¼å®ç°ç®€å•çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œä¹‹å‰æ˜¯é€šè¿‡ è°ƒç”¨ æ”¶é›†è€…å†…çš„ on() å’Œ emit() æ–¹æ³•å®ç°çš„</li> <li>å­¦ä¹ è¿‡ç¨‹åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼Œé¦–å…ˆæ˜¯å­¦ä¹ äº† <strong>æ•°æ®åŠ«æŒæ¨¡å—å’Œå±æ€§ä»£ç†ï¼ˆåŠ«æŒ get å’Œ setï¼‰</strong>ï¼Œ å…¶æ¬¡æ˜¯å­¦ä¹ äº†** compiler ç¼–è¯‘æ¨¡å—ï¼ˆé¡µé¢ä¸€æ¸²æŸ“èƒ½å°†æ¨¡æ¿æ¸²æŸ“ä¸ºå¯¹åº”å†…å®¹ï¼‰<strong>ï¼Œå†æ¬¡æ˜¯ç»“åˆ å‘å¸ƒè®¢é˜… å®ç°äº†</strong>æ•°æ®çš„å•å‘ç»‘å®šï¼ˆä¿®æ”¹ data ä¸­çš„æ•°æ®é¡µé¢ä¹Ÿä¼šè·Ÿç€ ä¿®æ”¹ï¼‰**ï¼Œæœ€åæ˜¯å®ç°äº† <strong>input çš„åŒå‘ç»‘å®š</strong></li> <li>é€šè¿‡ reduce çš„æ–¹æ³•å¯¹ é“¾å¼å¼•ç”¨ å–å€¼çš„å¦™ç”¨ï¼Œè®©è‡ªå·±æŒæ¡äº† reduce çš„ç”¨æ³•ï¼Œä¸‹æ¬¡å¯ä»¥å»è¯•è¯•å†™ä¸€ä¸ª æ•°ç»„æ‰å¹³åŒ– æºä»£ç äº†ï¼ï¼ï¼</li> <li>å¯¹ Object.definedProperty è¿™ä¸ªæ–¹æ³•æ›´åŠ ç†è§£äº†ï¼Œç”¨çš„å¤šäº†å°±ç†Ÿæ‚‰äº†</li> <li>å¯¹äºä¸€äº› HTML èŠ‚ç‚¹çš„ä½¿ç”¨ä¹Ÿæ›´ç†Ÿæ‚‰ä¸€äº›äº†ï¼Œå‘ç°äº†ä¹‹å‰è‡ªå·±å¯¹ DOM å…ƒç´ çš„è·å–è¿™ä¸€å—æ¬ ç¼ºå¾ˆå¤§ï¼Œå‡ ä¹æ²¡æœ‰ä½¿ç”¨è¿‡ï¼Œä¾‹å¦‚ <strong>nodeType</strong>ã€<strong>createDocumentFragment</strong>ã€<strong>node.attributes</strong> ç­‰ç­‰</li> <li>ä¹Ÿé€šè¿‡è¿™æ¬¡å½¬å“¥çš„æ•™å­¦æ–¹å¼æœ‰æ‰€å¯å‘ï¼š
<ol><li>å½¬å“¥æ˜¯å…ˆæŠŠå¿…é¡»è¦æŒæ¡çš„çŸ¥è¯†å…ˆè®²ä¸€éï¼Œå¹¶ä¸”å¼•å‡ºå¾ˆæ°å½“çš„ä½¿ç”¨åœºæ™¯ï¼ˆç»“åˆ Vueï¼‰ï¼Œå¾ˆå¥½ç†è§£</li> <li>æ¥ç€æ˜¯æ…¢æ…¢å¼•å…¥ä¸€ä¸ªä¸ªçš„<strong>æ¨¡å—</strong>è®²è§£ï¼Œåªè®²ä¸€ä¸‹è¿™æ ·åšçš„ä½œç”¨ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿç†è§£è¿™æ ·åšèƒ½å¹²ä»€ä¹ˆï¼Œå¾ˆå°‘è®²ä¸ºä»€ä¹ˆè¦è¿™æ ·åš</li> <li>è¿™æ ·å­å°†å®Œæ•´çš„åŒå‘æ•°æ®ç»‘å®šå®ç°ä¹‹åï¼Œæˆ‘èƒ½å¤Ÿæ„Ÿè§‰åˆ°å¾ˆå¤§éœ‡æ’¼çš„æ“ä½œï¼ˆè™½ç„¶ä¸­é—´å¾ˆå¤šæ“ä½œä¸çŸ¥é“ä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Œä½†æ˜¯èƒ½å¤ŸçŸ¥é“æŒ‰ç…§è€å¸ˆè¿™æ ·åšèƒ½æœ‰ä»€ä¹ˆæ•ˆæœï¼‰ï¼Œæœ€ç»ˆæ¿€å‘æˆ‘çš„å…´è¶£ä¸€ç‚¹ç‚¹å®è·µï¼</li> <li>æœ€ç»ˆåœ¨æ‰‹æ•²ä»£ç çš„æ—¶å€™ä¼š<strong>è‡ªå·±æ€è€ƒ</strong>ï¼šä¸ºä»€ä¹ˆè¿™é‡Œè¦è¿™æ ·åšï¼Ÿè¿™æ ·åšè€ƒè™‘äº†å“ªäº›ç»†èŠ‚ï¼Ÿæœ‰çš„åœ°æ–¹æ˜¯ä¸æ˜¯è€ƒè™‘çš„ä¸æ˜¯ç‰¹åˆ«å¥½ï¼Œå¯ä»¥å®Œå–„ï¼ˆä¾‹å¦‚å•ä¾‹æ¨¡å¼çš„æ”¶é›†è€…ï¼‰ï¼Ÿä¹‹å‰çš„çŸ¥è¯†ç‚¹æ˜¯ä¸æ˜¯ä¹Ÿæœ‰è¿™æ ·åšçš„ä¾‹å­ï¼ˆå…³è”ä»¥å‰çš„çŸ¥è¯†ç‚¹ï¼Œä¾‹å¦‚ Dep ä¸­ç»‘å®š Watcher å®ä¾‹ <strong>ç±»æ¯”</strong> <strong>åŸå‹æ–¹å¼çš„ç»§æ‰¿</strong>ï¼‰ï¼Ÿç­‰ç­‰ä¸€ç³»åˆ—çš„æ€è€ƒéƒ½æ˜¯åœ¨å®è·µä¸­å¾—æ¥çš„ã€‚è™½ç„¶è¿‡ç¨‹å¾ˆèŠ±æ—¶é—´ï¼Œä½†æ˜¯æ”¶è·ç®—æ˜¯è›®å¤§çš„ï¼Œå¯¹äºæ¥ä¸‹æ¥å­¦ä¹  Vue çš„åŸç†æˆ–è®¸ä¼šæœ‰å¾ˆå¤§çš„å¸®åŠ©ï¼ï¼ï¼</li></ol></li></ol></li> <li>ğŸ’¯ğŸ’¯ğŸ’¯å¸Œæœ›ä¹‹åèƒ½ä¸æ€•éº»çƒ¦ï¼Œå¤šçœ‹çœ‹è¿™ç¯‡ æ–‡ç« ï¼Œå®ç°å®Œå…¨ç†è§£ Vue åŒå‘ç»‘å®šåŸç†ï¼Œæ‰‹å†™éƒ½èƒ½å†™å‡ºæ¥å§ï¼ï¼ï¼</li></ol></div></section> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Xguihur/GuihurBlog.git/edit/master/technology_sharing/Vueå“åº”å¼åŸç†è§£æ.md" target="_blank" rel="noopener noreferrer">å¸®åŠ©æˆ‘ä»¬æ”¹å–„æ­¤é¡µé¢ï¼</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°: </span> <span class="time">2024/2/27 ä¸Šåˆ12:49:40</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/GuihurBlog/technology_sharing/TOTPåŸç†è§£æ.html" class="prev">
          TOTPåŸç†è§£æ
        </a></span> <span class="next"><a href="/GuihurBlog/technology_sharing/ç›²æ‰“é€Ÿæˆ.html">
          ç›²æ‰“é€Ÿæˆ
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/GuihurBlog/technology_sharing/Vue%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90.html#ğŸ™‚åˆ›å»º-vue-ç±»" class="sidebar-link reco-side-ğŸ™‚åˆ›å»º-vue-ç±»" data-v-b57cc07c>ğŸ™‚åˆ›å»º Vue ç±»</a></li><li class="level-2" data-v-b57cc07c><a href="/GuihurBlog/technology_sharing/Vue%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90.html#ğŸ˜„åˆ›å»º-æ•°æ®åŠ«æŒ-çš„æ–¹æ³•" class="sidebar-link reco-side-ğŸ˜„åˆ›å»º-æ•°æ®åŠ«æŒ-çš„æ–¹æ³•" data-v-b57cc07c>ğŸ˜„åˆ›å»º æ•°æ®åŠ«æŒ çš„æ–¹æ³•</a></li><li class="level-2" data-v-b57cc07c><a href="/GuihurBlog/technology_sharing/Vue%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90.html#ğŸ˜¬åˆ›å»º-compile-æ¨¡å—" class="sidebar-link reco-side-ğŸ˜¬åˆ›å»º-compile-æ¨¡å—" data-v-b57cc07c>ğŸ˜¬åˆ›å»º compile æ¨¡å—</a></li><li class="level-2" data-v-b57cc07c><a href="/GuihurBlog/technology_sharing/Vue%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90.html#ğŸ˜åˆ›å»º-æ”¶é›†è€…ç±»-ä»¥åŠ-è®¢é˜…è€…-ç±»" class="sidebar-link reco-side-ğŸ˜åˆ›å»º-æ”¶é›†è€…ç±»-ä»¥åŠ-è®¢é˜…è€…-ç±»" data-v-b57cc07c>ğŸ˜åˆ›å»º æ”¶é›†è€…ç±» ä»¥åŠ è®¢é˜…è€… ç±»</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/GuihurBlog/assets/js/app.8bb8757a.js" defer></script><script src="/GuihurBlog/assets/js/7.f1c26474.js" defer></script><script src="/GuihurBlog/assets/js/2.70e4b6cf.js" defer></script><script src="/GuihurBlog/assets/js/1.e850f610.js" defer></script><script src="/GuihurBlog/assets/js/47.0951090b.js" defer></script>
  </body>
</html>
